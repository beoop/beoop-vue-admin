import{f as e,r as a,g as r}from"./index.07dea43c.js";import{a4 as t,s as n,a5 as i,a6 as l,a7 as o,a8 as u,a9 as s,aa as c,ab as d,ac as f,ad as v,d as p,a as h,e as m,r as g,m as b,g as y,ae as w,af as O,ag as j,ah as k,ai as P,j as A}from"./vendor.d0315eed.js";function S(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?Object(arguments[a]):{},t=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(a){q(e,a,r[a])}))}return e}function q(e,a,r){return a in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function F(){return(F=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function x(e){var a=!1;return e&&e.length&&e.every((function(e){return!e.required||(a=!0,!1)})),a}function C(e){return null==e?[]:Array.isArray(e)?e:[e]}function E(e,a,r){for(var t=e,n=(a=(a=a.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0,l=n.length;i<l-1&&(t||r);++i){var o=n[i];if(!(o in t)){if(r)throw new Error("please transfer a valid name path to validate!");break}t=t[o]}return{o:t,k:n[i],v:t?t[n[i]]:null,isValid:t&&n[i]in t}}function I(e,a,r){var p=t(e),h={};Object.keys(a).forEach((function(e){h[e]={autoLink:!1,required:x(a[e])}})),h=n(h);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return a.length?e.filter((function(e){var r=C(e.trigger||"change");return v(r,a).length})):e},g=null,b=function(e,a,r,t){var n=l([e],a,r,S({validateMessages:o},t),!!t.validateFirst);return h[e].validateStatus="validating",n.catch((function(e){return e})).then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===h[e].validateStatus&&(h[e].validateStatus=a.length?"error":"success",h[e].help=a[0])})),n},y=function(r,t){var n=[],i=!0;r?n=Array.isArray(r)?r:[r]:(i=!1,n=Object.keys(a));var l=function(r){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=[],l={},o=function(o){var u=r[o],s=E(e,u,n);if(!s.isValid)return"continue";l[u]=s.v;var c=m(a[u],C(t&&t.trigger));c.length&&i.push(b(u,s.v,c,t||{}).then((function(){return{name:u,errors:[]}})).catch((function(e){return Promise.reject({name:u,errors:e})})))},u=0;u<r.length;u++)o(u);var s=d(i);g=s;var c=s.then((function(){return g===s?Promise.resolve(l):Promise.reject([])})).catch((function(e){var a=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:l,errorFields:a,outOfDate:g!==s})}));return c.catch((function(e){return e})),c}(n,t||{},i);return l.catch((function(e){return e})),l},w=p,O=function(e){var r=[];Object.keys(a).forEach((function(a){var t=E(e,a,!1),n=E(w,a,!1);f(t.v,n.v)||r.push(a)})),y(r,{trigger:"change"}),w=t(e)},j=null==r?void 0:r.debounce;return u(e,j&&j.wait?s(O,j.wait,c(j,["wait"])):O,{immediate:r&&!!r.immediate,deep:!0}),u(a,(function(){r&&r.validateOnRuleChange&&y()}),{deep:!0}),{modelRef:e,rulesRef:a,initialModel:p,validateInfos:h,resetFields:function(r){F(e,S({},t(p),r)),i((function(){Object.keys(h).forEach((function(e){h[e]={autoLink:!1,required:x(a[e])}}))}))},validate:y,validateField:b,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a={autoLink:!1},r=[],t=Array.isArray(e)?e:[e],n=0;n<t.length;n++){var i=t[n];"error"===(null==i?void 0:i.validateStatus)&&(a.validateStatus="error",i.help&&r.push(i.help)),a.required=a.required||(null==i?void 0:i.required)}return a.help=r.join("\n"),a},clearValidate:function(e){(e?Array.isArray(e)?e:[e]:Object.keys(a)).forEach((function(e){h[e]&&F(h[e],{validateStatus:"",help:""})}))}}}const L=p({emits:{submit:e=>!(!e.username||!e.password)||(console.warn("Invalid submit event payload!"),!1)},setup(e,{emit:a}){const r=h(!1),t=n({username:"",password:""}),i=n({username:[{required:!0,message:"Please input Activity name"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],password:[{required:!0,message:"Please select region"}]}),l=()=>{r.value=!0,setTimeout((()=>{u().then((()=>{a("submit",t)})).catch((e=>{console.log("error",e)})).finally((()=>{r.value=!1}))}),1e3)},{resetFields:o,validate:u,validateInfos:s}=I(t,i),c=(e="")=>({size:"large",placeholder:e});return()=>m(g("a-form"),{wrapperCol:{span:24}},{default:()=>[m(g("a-form-item"),s.username,{default:()=>[m(g("a-input"),b({value:t.username,"onUpdate:value":e=>t.username=e},c("账号 admin")),null)]}),m(g("a-form-item"),s.password,{default:()=>[m(g("a-input-password"),b({value:t.password,"onUpdate:value":e=>t.password=e},c("密码 admin")),null)]}),m(g("a-form-item"),{wrapperCol:{span:24}},{default:()=>[m(g("a-button"),{type:"primary",size:"large",onClick:l,block:!0,loading:r.value},{default:()=>[y("登录")]})]})]})}}),V={visible:!0,width:350,closable:!1,maskClosable:!1,footer:null,mask:!1,centered:!0};var z=p({components:{QqOutlined:w,WechatFilled:O,GithubOutlined:j,AlipayCircleFilled:k},setup(){const t=A(),n={onSubmit:e=>{t.dispatch("Login",e).then((e=>{t.dispatch("GetInfo").then((e=>{a.push({name:r.app.homeName})}))})).catch((e=>{P.info(e)}))}};return()=>m("div",{class:"login"},[m(g("a-modal"),V,{default:()=>[m("div",{class:"login-header"},[m(e,null,null)]),m(L,n,null),m("div",{style:"display: flex; align-items: center"},[m("span",{style:"margin-right: 12px"},[y("第三方登录")]),m(g("a-space"),{style:{fontSize:"24px",color:"rgba(0,0,0,.25)"}},{default:()=>[m(w,null,null),m(O,null,null),m(k,null,null),m(j,null,null)]})])]})])}});export default z;
